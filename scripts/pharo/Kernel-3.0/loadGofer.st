Object subclass: #MCPackage  instanceVariableNames: 'name'  classVariableNames: ''  poolDictionaries: ''  category: 'Monticello-Base'!Object subclass: #MCPackageManager  instanceVariableNames: 'package modified'  classVariableNames: ''  poolDictionaries: ''  category: 'Monticello-Versioning' !'From Pharo2.0a of ''18 April 2012'' [Latest update: #20059] on 8 May 2012 at 11:12:34 am'!!MCPackageManager class methodsFor: '*rpackage-systemintegration' stamp: 'StephaneDucasse 4/29/2011 20:40'!unregisterForNotifications  Smalltalk globals    at: #SystemChangeNotifier    ifPresent:      [:cls|      cls uniqueInstance noMoreNotificationsFor: self]    ! !Object subclass: #RPackageOrganizer  instanceVariableNames: 'classPackageMapping packages classExtendingPackagesMapping debuggingName'  classVariableNames: ''  poolDictionaries: ''  category: 'RPackage-Core' !'From Pharo2.0a of ''18 April 2012'' [Latest update: #20059] on 8 May 2012 at 10:48:14 am'!!RPackageOrganizer methodsFor: 'RPackage-SystemIntegration' stamp: 'StephaneDucasse 10/16/2011 20:57'!announcer  ^ SystemAnnouncer uniqueInstance private! !'From Pharo2.0a of ''18 April 2012'' [Latest update: #20059] on 8 May 2012 at 11:35:48 am'!!RPackageOrganizer methodsFor: '*RPackage-SystemIntegration' stamp: 'IgorStasenko 8/12/2011 16:36'!registerInterestToSystemAnnouncement! !'From Pharo2.0a of ''18 April 2012'' [Latest update: #20580] on 5 March 2013 at 9:37:29 am'!!RPackageOrganizer methodsFor: '*RPackage-SystemIntegration' stamp: 'EstebanLorenzano 10/30/2012 15:16'!packageForProtocol: aProtocolName inClass: aClass  "According aProtocolName is an extension protocol, will look for a matching package. If no matching package is found ,  return nil. If aProtocolName is not an extension protocol, return the parent package of aClass"    ^ nil! ![	| log old oldCalls lastCalls |log := FileStream stdout.old := Undeclared copy.oldCalls := SystemNavigation default allUnimplementedCalls.lastCalls := oldCalls.#(  'PackageInfo'   'System-FileRegistry'   'RPackage-Core'  'RPackage-SystemIntegration'  'Monticello'   'MonticelloConfigurations'   'Settings-Monticello'  'Ring-Monticello'  'Gofer-Core') do: [:package|  log nextPutAll: 'loading ', package, '...'; lf.  CodeImporter evaluateReadStream: (package, '.st') asFileReference readStream.  log nextPutAll: package, ' loaded'; lf.  log nextPutAll: 'New Undeclared:'; lf.  log nextPutAll: (Undeclared copyWithoutAll: old) asString; lf.  log nextPutAll: 'New unimplemented calls:'; lf.  unimplemented := SystemNavigation default allUnimplementedCalls.  log nextPutAll: (unimplemented copyWithoutAll: lastCalls) asString; lf.  lastCalls := unimplemented.  log nextPutAll: 'Unimplemented calls:'; lf.  log nextPutAll: (unimplemented copyWithoutAll: oldCalls) asString; lf; lf.].log close.] ifError: [:e |	| rep |	rep := FileStream forceNewFileNamed: 'PharoDebug.log'.	rep nextPutAll: 'loadGofer.st'; cr.	rep nextPutAll: 'Error:'; cr.	rep nextPutAll: e asString; cr.	rep nextPutAll: thisContext stack size asString; cr."	rep nextPutAll: ((thisContext stack copy at: 12) tempsAndValues ) asString; cr."	thisContext stack copy withIndexDo: [:stck :i |		[rep nextPutAll: i asString; space; nextPutAll: stck asString; cr] ifError: [:er | rep nextPutAll: er asString; cr]].	rep close. 	Smalltalk exitFailure.]  ! !RPackageOrganizer class methodsFor: '*RPackage-SystemIntegration' stamp: 'sd 4/23/2011 23:31'!registerInterestToSystemAnnouncement  self default unregisterInterestToSystemAnnouncement.  "To make sure that we do not have it twice registered"  self default registerInterestToSystemAnnouncement! !'From Pharo3.0 of 18 March 2013 [Latest update: #30172] on 29 May 2013 at 10:50:04 am'!!CompiledMethod methodsFor: 'accessing' stamp: 'BenjaminVanRyseghem 5/12/2011 11:28'!protocol  " start to migrate to RING API "  ^ self category! ![| packages gofer |RPackageOrganizer registerInterestToSystemAnnouncement.packages := (Shrinker new kernelPackageNames copyWithoutAll: #('Shrinker')), #(  'Zinc-Resource-Meta-Core'  'Zinc-Character-Encoding-Core'  'Network-Kernel'   'Network-MIME'   'Network-UUID'   'Network-Url'   'Network-URI'   'Network-Protocols'  'Zinc-HTTP'   'Zinc-Patch-HTTPSocket'   'Settings-Network'  'PackageInfo'   'System-FileRegistry'   'RPackage-Core'  'RPackage-SystemIntegration'  'Monticello'   'MonticelloConfigurations'   'Settings-Monticello'  'Gofer-Core'  'Ring-Monticello').ZnConnectionTimeout value: 300 during: [  gofer:= Gofer it smalltalkhubUser: 'Pharo' project: 'Pharo30'.  packages do: [:package | gofer package: package ].  [gofer load.] on: MCMergeOrLoadWarning do: [:warning | warning resume].].SmalltalkImage current snapshot: true andQuit: true.] ifError: [:e |  | rep |  rep := FileStream forceNewFileNamed: 'PharoDebug.log'.  rep nextPutAll: 'loadGofer.st'; cr.  rep nextPutAll: 'Error:'; cr.  rep nextPutAll: e asString; cr.  rep nextPutAll: thisContext stack size asString; cr." rep nextPutAll: ((thisContext stack copy at: 12) tempsAndValues ) asString; cr."  thisContext stack copy withIndexDo: [:stck :i |    [rep nextPutAll: i asString; space; nextPutAll: stck asString; cr] ifError: [:er | rep nextPutAll: er asString; cr]].  rep close.   Smalltalk exitFailure.]