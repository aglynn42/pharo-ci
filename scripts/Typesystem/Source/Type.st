'From Pharo1.4a of ''16 June 2011'' [Latest update: #14263] on 30 January 2012 at 2:46:19 pm'!Object subclass: #Type	uses: TTyped	instanceVariableNames: ''	classVariableNames: ''	poolDictionaries: ''	category: 'TypeSystem-Core'!!Type methodsFor: 'as yet unclassified' stamp: 'EstebanAllende 12/15/2011 12:25'!(Boolean) = another       |(Type)a (Type)b ({simplify (→Type)})c|       another ifNil: [^false].       a:= self simplify.       [c := another] on: CastError do: [:ex | ^ false].       b:= c simplify.       ^[a typeEquality: b] on: CastError do: [:ex | false]! !!Type methodsFor: 'as yet unclassified' stamp: 'EstebanAllende 12/23/2011 12:02'!(Type) annotateSelfWith: (ClassDescription)aClass inMethod: (MethodSignature) aMethodSignature withKind: (Symbol) aSymbol	^self subclassResponsibility! !!Type methodsFor: 'as yet unclassified' stamp: 'EstebanAllende 12/22/2011 11:37'!(NominalType) asNominalType	^nil! !!Type methodsFor: 'as yet unclassified' stamp: 'EstebanAllende 1/26/2012 14:43'!(StructuralType) asStructuralType	^nil! !!Type methodsFor: 'as yet unclassified' stamp: 'EstebanAllende 12/13/2011 18:38'!(Self) asType	^self! !!Type methodsFor: 'as yet unclassified' stamp: 'EstebanAllende 12/6/2011 23:08'!(Type) classType	^self subclassResponsibility! !!Type methodsFor: 'as yet unclassified' stamp: 'EstebanAllende 12/6/2011 23:08'!(Integer) hash	^self subclassResponsibility! !!Type methodsFor: 'as yet unclassified' stamp: 'EstebanAllende 12/6/2011 23:08'!(Type) instanceType	^self subclassResponsibility! !!Type methodsFor: 'as yet unclassified' stamp: 'EstebanAllende 12/6/2011 23:08'!(Boolean) isConsistentSubtypeOf: (Type) aType	^Type is: self consistentSubtypeOf: aType! !!Type methodsFor: 'as yet unclassified' stamp: 'EstebanAllende 12/6/2011 23:08'!(Boolean) isSubtypeOf: (Type) aType	^Type is: self subtypeOf: aType! !!Type methodsFor: 'as yet unclassified' stamp: 'EstebanAllende 12/6/2011 23:08'!(Boolean) isType	^true! !!Type methodsFor: 'as yet unclassified' stamp: 'EstebanAllende 12/22/2011 12:06'!(Boolean) isValid	^self validate size = 0! !!Type methodsFor: 'as yet unclassified' stamp: 'EstebanAllende 12/6/2011 23:08'!(Type) pureType	^self	! !!Type methodsFor: 'as yet unclassified' stamp: 'EstebanAllende 12/6/2011 23:08'!(Type) replaceSelfWith: (Type) aType	^self subclassResponsibility.! !!Type methodsFor: 'as yet unclassified' stamp: 'EstebanAllende 12/6/2011 23:08'!(Type) simplify	^self! !!Type methodsFor: 'as yet unclassified' stamp: 'EstebanAllende 12/13/2011 18:47'!(Boolean) typeEquality: (Self) another	<access: #protected>	^self subclassResponsibility.! !!Type methodsFor: 'as yet unclassified' stamp: 'EstebanAllende 12/7/2011 11:49'!(Type) typeOfSelector: (Symbol)selector fromClass: (ClassDescription) requestor	^self subclassResponsibility.! !!Type methodsFor: 'as yet unclassified' stamp: 'EstebanAllende 12/22/2011 12:14'!(OrderedCollection) validate	^#() asOrderedCollection! !!Type methodsFor: '*typesystem-types' stamp: 'EstebanAllende 12/7/2011 11:19'!(Boolean) isDyn	^false! !!Type methodsFor: '*typesystem-types' stamp: 'EstebanAllende 12/7/2011 11:19'!(Boolean) isLambda	^false! !!Type methodsFor: '*typesystem-types' stamp: 'EstebanAllende 12/7/2011 11:19'!(Boolean) isNominal	^false! !!Type methodsFor: '*typesystem-types' stamp: 'EstebanAllende 12/7/2011 11:20'!(Boolean) isSelf	^false! !!Type methodsFor: '*typesystem-types' stamp: 'EstebanAllende 12/7/2011 11:20'!(Boolean) isStructural	^false! !"-- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- "!Type class	uses: TTyped classTrait	instanceVariableNames: '(Dictionary)subtypeRelations (Dictionary)consistentSubtypeRelations'!!Type class methodsFor: 'as yet unclassified' stamp: 'EstebanAllende 12/7/2011 02:12'!compilerContext	^OTCSupport defaultCompilerContext! !!Type class methodsFor: 'as yet unclassified' stamp: 'EstebanAllende 1/30/2012 13:52'!(Type) defaultType	^TypeConfiguration uniqueInstance defaultType! !!Type class methodsFor: 'as yet unclassified' stamp: 'EstebanAllende 12/12/2011 17:49'!(Self) initialize	OTCSupport bootstrapping ifFalse: [^self].	subtypeRelations := IdentityDictionary new.	consistentSubtypeRelations := IdentityDictionary new.! !!Type class methodsFor: 'as yet unclassified' stamp: 'EstebanAllende 1/30/2012 14:00'!(Boolean) is: (Type) type1 consistentSubtypeOf: (Type) type2	^TypeConfiguration uniqueInstance consistentSubtypeRules is: type1 relatedWith: type2.! !!Type class methodsFor: 'as yet unclassified' stamp: 'EstebanAllende 1/30/2012 14:00'!(Boolean) is: (Type) type1 subtypeOf: (Type) type2	^TypeConfiguration uniqueInstance subtypeRules is: type1 relatedWith: type2.! !!Type class methodsFor: 'as yet unclassified' stamp: 'EstebanAllende 12/7/2011 02:14'!(Self) registerConsistentSubtypeRelationBetween: (Class) aClass1 and: (Class) aClass2 using: (Type Type → Boolean) aBlock	|(Dictionary)cSubtypeClass1Dict|	cSubtypeClass1Dict := consistentSubtypeRelations at: aClass1 ifAbsentPut: [IdentityDictionary new].	cSubtypeClass1Dict at: aClass2 put: aBlock! !!Type class methodsFor: 'as yet unclassified' stamp: 'EstebanAllende 12/7/2011 02:14'!(Self) registerSubtypeRelationBetween: (Class) aClass1 and: (Class) aClass2 using: (Type Type → Boolean) aBlock	|(Dictionary)subtypeClass1Dict|	subtypeClass1Dict := subtypeRelations at: aClass1 ifAbsentPut: [IdentityDictionary new].	subtypeClass1Dict at: aClass2 put: aBlock! !Type initialize!